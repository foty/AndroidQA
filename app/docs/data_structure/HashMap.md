### HashMap

是什么  
数据结构  
特点   
部分原理   
相关问题

#### 1、是什么
HashMap是基于哈希表的 Map 接口的非同步实现的一种特殊集合。以key-value形式的键值对存储数据，并允许存在null值和null键，
有很快的访问速度，取出的数据的顺序是随机的。

#### 2、数据结构
数组+链表+红黑树(1.8才有)

#### 3、特点
* HashMap是基于哈希表的Map实现。
* HashMap底层数据结构是数组(1.7)和链表实现，后来增加了红黑树(1.8)。
* HashMap是采用key-value形式存储，key是可以为null，但是只能有一个，key不能重复。
* HashMap保存数据的顺序和访问顺序可能是不一样的。
* HashMap是线程不安全的。

#### 4、部分原理

##### 说说HashMap的原理
> HashMap是基于数组+链表结构设计。数组中的每个元素都是一条链表的表头。数组默认长度为16。添加元素时，根据key的hash
> 值与数组长度-1的差做与运算，得到元素在数组中的位置。如果数组对应索引存在元素并且它们的hash值不一样，就将新元素添加到后
> 面(尾插法，jdk1.7是头插法)成为该链表的一个新节点。jdk1.8后，引入红黑树，当hash数组的容量大于64且链表长度大于8时，
> 链表转红黑树；当长度小于6的时，红黑树转链表。


##### HashMap中get()、put()如何实现的
put：
> 1、计算key的hash值；   
> 2、计算key在数组中的索引(hash&(arr.length-1)；   
> 3、如果当前索引对应的数组元素为null，直接在该索引上，充当链表头几点；如果不为null，比较key的hash值或者equals，
> 有一个不同时将新元素插入到链表成为新节点；如果都hash值跟equals都相等，替换value。

get:
> 1、计算key的hash值；   
> 2、计算key在数组中的索引(hash&(arr.length-1)；    
> 3、key的hash值判断，如果是链表头节点则返回头结点；如果不是，判断表头节点是否属于红黑树。如果是，遍历红黑树查找
> 到目标，否则遍历链表找到指定元素。

#### 5、相关问题

##### HashMap 的扩容因子为什么是0.75?
> 大概是根据空间与时间的权衡效果吧(泊松分布了解一下，默认容量是16，在12的情况下是最优的)

##### HashMap中hash函数怎么实现的，还有哪些hash函数的实现方式
> 首先获取到key的hashcode值， 然后让hashcode值的高16位和低16位进行异或操作。目的是为了降低哈希碰撞的概率。

##### HashMap和ConcurrentHashMap的区别
> 最大区别就是HashMap线程不安全、ConcurrentHashMap线程安全。